<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlas</title>
    <link rel="stylesheet" href="style.css">
    <!-- Add Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        /* Overall dark theme */
        body {
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
            touch-action: manipulation;
            overflow: hidden;
            /* Prevent scrolling */
        }

        /* Change screen styling to be absolute positioned instead of scrollable */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: rgba(18, 18, 18, 0.85);
            background-blend-mode: overlay;
            color: #ffffff;
            padding: 70px 15px 80px;
            /* Add padding for navigation bars */
            overflow-y: auto;
            /* Allow scrolling within tabs */
            z-index: 1;
            /* Base z-index */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        /* Active screen */
        .screen.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
            /* Higher z-index for active screen */
        }

        /* Special styling for start screen */
        #start-screen {
            background-image: url('/public/background.webp');
            background-color: rgba(0, 0, 0, 1.0);
            /* Semi-transparent black overlay */
        }

        /* Style for navigation arrows */
        .nav-arrow {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            /* Ensure arrows are on top */
            color: #ffffff;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 44px;
            /* Increased touch target */
            height: 44px;
            /* Increased touch target */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Dark theme for links */
        a {
            color: #f2fc86;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: #03dac6;
        }

        /* Style for start circle */
        .start-circle {
            background-color: #2d2d2d;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
        }

        .start-circle a {
            color: #03dac6;
            font-weight: bold;
        }

        /* Features section styling */
        .features {
            display: flex;
            flex-direction: column;
            /* Stack on mobile */
            width: 90%;
            margin-top: 20px;
        }

        .feature {
            background-color: #2d2d2d;
            border-radius: 8px;
            padding: 15px;
            margin: 8px 0;
            /* Vertical spacing */
            text-align: center;
            transition: transform 0.3s ease;
            width: 100%;
        }

        .feature:hover {
            transform: translateY(-5px);
            background-color: #3d3d3d;
        }

        .feature img {
            max-width: 100px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        /* Navigation menu styling */
        nav ul {
            list-style: none;
            display: flex;
            padding: 0;
        }

        nav ul li {
            margin: 0 15px;
        }

        h1,
        h2 {
            color: #f2fc86;
            text-shadow: 0 0 10px rgba(252, 248, 134, 0.3);
        }

        /* Bottom navigation bar */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: transparent;
            /* Changed from #1e1e1e to transparent */
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: none;
            /* Removed the shadow */
            z-index: 100;
            /* Ensure nav is above all screens */
        }

        .nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #f2fc86;
            text-decoration: none;
            padding: 12px 16px;
            /* Larger touch target */
            border-radius: 8px;
            transition: all 0.3s ease;
            background-color: rgba(30, 30, 30, 0.0);
            /* Semi-transparent background for buttons */
        }

        .nav-button:hover,
        .nav-button.active {
            background-color: rgba(61, 61, 61, 0.0);
            /* Semi-transparent hover state */
            color: #f7f7f7;
        }

        .nav-button i {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .nav-button span {
            font-size: 12px;
        }

        /* News feed styling */
        .news-feed {
            width: 95%;
            max-height: 60vh;
        }

        .post {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .post-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #f2fc86;
        }

        .post-info {
            flex-grow: 1;
        }

        .post-author {
            font-weight: bold;
            color: #f2fc86;
            margin: 0;
        }

        .post-meta {
            font-size: 12px;
            color: #888;
            margin: 3px 0 0 0;
        }

        .post-content {
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .post-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #333;
            padding-top: 12px;
        }

        .post-action {
            display: flex;
            align-items: center;
            color: #888;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .post-action:hover {
            color: #03dac6;
        }

        .post-action i {
            margin-right: 5px;
        }

        .company-post .post-avatar {
            background-color: #2d4263;
        }

        .company-post .post-author {
            color: #03dac6;
        }

        .verified-badge {
            color: #03dac6;
            margin-left: 5px;
            font-size: 14px;
        }

        /* Full-screen Earth container styling */
        #earth-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            /* Above background, below content */
            pointer-events: auto;
            /* Enable interaction */
        }

        /* Ensure start screen content appears above Earth */
        #start-screen .content-wrapper {
            position: relative;
            z-index: 2;
            /* Above Earth */
            pointer-events: auto;
            padding: 20px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Add semi-transparent background to text elements for readability */
        #start-screen .title-container,
        #start-screen .subtitle-container,
        #start-screen .start-buttons {
            background-color: rgba(18, 18, 18, 0.6);
            padding: 15px 25px;
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
            backdrop-filter: blur(3px);
            max-width: 80%;
            text-align: center;
        }

        /* Post creation form styling */
        .post-form {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            width: 95%;
            /* Match the width of the news feed */
        }

        .post-form textarea {
            width: 100%;
            background-color: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            color: #e0e0e0;
            padding: 12px;
            margin-bottom: 10px;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
        }

        .post-form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            /* Allow wrapping on very small screens */
        }

        .post-form-attachments {
            display: flex;
            gap: 15px;
        }

        .attachment-button {
            color: #f2fc86;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 8px;
            /* Larger touch target */
        }

        .attachment-button:hover {
            color: #03dac6;
        }

        .post-button {
            background-color: #f2fc86;
            color: #121212;
            border: none;
            border-radius: 20px;
            padding: 10px 24px;
            /* Larger touch target */
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 8px;
        }

        .post-button:hover {
            background-color: #03dac6;
        }

        /* Media query for larger devices */
        @media (min-width: 768px) {
            .features {
                flex-direction: row;
                justify-content: space-around;
            }

            .feature {
                width: 30%;
                margin: 10px;
            }

            .post-form,
            .news-feed {
                width: 90%;
                max-width: 600px;
            }

            #earth-container {
                width: 400px;
                height: 400px;
            }
        }

        /* Company list styling */
        .section-intro {
            text-align: center;
            margin-bottom: 20px;
            width: 90%;
        }

        .company-list {
            width: 95%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 80px;
            /* Space for bottom nav */
        }

        .company-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease, background-color 0.2s ease;
        }

        .company-card:hover {
            transform: translateY(-3px);
            background-color: #2a2a2a;
        }

        .company-logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #2d4263;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .company-icon {
            font-size: 24px;
            color: #03dac6;
        }

        .company-info {
            flex-grow: 1;
        }

        .company-info h3 {
            margin: 0 0 5px 0;
            color: #f2fc86;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .company-type {
            font-size: 12px;
            color: #888;
            display: block;
            margin-bottom: 8px;
        }

        .company-info p {
            margin: 0 0 10px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .company-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .badge {
            background-color: #3d3d3d;
            color: #03dac6;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .verified-badge {
            color: #03dac6;
            font-size: 14px;
        }

        /* Hub content styling */
        #hub {
            padding-top: 60px;
        }

        .section-intro {
            text-align: center;
            margin-bottom: 20px;
            width: 90%;
            color: #bbbbbb;
        }

        /* Featured carousel */
        .featured-carousel {
            width: 95%;
            max-width: 600px;
            height: 200px;
            position: relative;
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
        }

        .featured-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .featured-item.active {
            opacity: 1;
        }

        .featured-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .featured-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
        }

        .featured-overlay h3 {
            margin: 5px 0;
            font-size: 18px;
        }

        .featured-overlay p {
            margin: 5px 0 15px;
            font-size: 14px;
            opacity: 0.9;
        }

        .watch-button {
            background-color: #03dac6;
            color: #121212;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        /* Content categories */
        .content-categories {
            display: flex;
            gap: 10px;
            width: 95%;
            max-width: 600px;
            overflow-x: auto;
            padding: 5px 0;
            margin-bottom: 15px;
            scrollbar-width: none;
            /* Firefox */
        }

        .content-categories::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, Edge */
        }

        .category-button {
            background-color: #2d2d2d;
            color: #e0e0e0;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            white-space: nowrap;
            cursor: pointer;
        }

        .category-button.active {
            background-color: #f2fc86;
            color: #121212;
        }

        /* Content grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            width: 95%;
            max-width: 600px;
            margin-bottom: 80px;
            /* Space for bottom nav */
        }

        .content-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .content-card:hover {
            transform: translateY(-3px);
        }

        .content-thumbnail {
            position: relative;
            height: 100px;
        }

        .content-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .content-tag {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 10px;
            font-weight: bold;
            padding: 3px 6px;
            border-radius: 4px;
            z-index: 1;
        }

        .content-tag.live {
            background-color: #f44336;
            color: white;
        }

        .content-tag.documentary {
            background-color: #2196f3;
            color: white;
        }

        .content-tag.vlog {
            background-color: #4caf50;
            color: white;
        }

        .content-tag.movie {
            background-color: #ff9800;
            color: white;
        }

        .content-duration {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .content-info {
            padding: 10px;
        }

        .content-info h4 {
            margin: 0 0 5px 0;
            font-size: 14px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .content-creator {
            margin: 0 0 3px 0;
            font-size: 12px;
            color: #f2fc86;
        }

        .content-views {
            margin: 0;
            font-size: 11px;
            color: #888;
        }

        /* Media query for larger screens */
        @media (min-width: 768px) {
            .featured-carousel {
                height: 250px;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }

        /* Connections styling */
        #connections {
            padding-top: 60px;
        }

        .section-intro {
            text-align: center;
            margin-bottom: 20px;
            width: 90%;
            color: #bbbbbb;
        }

        /* Search bar */
        .search-container {
            width: 95%;
            max-width: 600px;
            margin-bottom: 20px;
        }

        .search-bar {
            background-color: #2d2d2d;
            border-radius: 20px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
        }

        .search-icon {
            color: #888;
            margin-right: 10px;
        }

        .search-bar input {
            background: none;
            border: none;
            color: #e0e0e0;
            width: 100%;
            font-size: 16px;
            outline: none;
        }

        /* Connection tabs */
        .connection-tabs {
            display: flex;
            width: 95%;
            max-width: 600px;
            overflow-x: auto;
            margin-bottom: 20px;
            scrollbar-width: none;
        }

        .connection-tabs::-webkit-scrollbar {
            display: none;
        }

        .connection-tab {
            background: none;
            border: none;
            color: #e0e0e0;
            padding: 10px 15px;
            font-size: 16px;
            position: relative;
            cursor: pointer;
            white-space: nowrap;
        }

        .connection-tab.active {
            color: #f2fc86;
        }

        .connection-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 15%;
            width: 70%;
            height: 3px;
            background-color: #f2fc86;
            border-radius: 3px;
        }

        /* Connection sections */
        .connection-section {
            width: 95%;
            max-width: 600px;
            display: none;
            margin-bottom: 80px;
        }

        .connection-section.active {
            display: block;
        }

        .section-title {
            margin: 0 0 15px 0;
            font-size: 18px;
            color: #e0e0e0;
        }

        /* Connection cards */
        .connection-cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* People cards */
        .connection-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .connection-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #2d4263;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .connection-avatar i {
            font-size: 20px;
            color: #03dac6;
        }

        .connection-info {
            flex-grow: 1;
        }

        .connection-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .connection-detail {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: #f2fc86;
        }

        .connection-mutual {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: #888;
        }

        .connection-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .connection-tag {
            background-color: #2d2d2d;
            color: #03dac6;
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
        }

        .connect-button {
            background-color: #2d2d2d;
            color: #f2fc86;
            border: none;
            border-radius: 20px;
            padding: 8px 12px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            margin-left: 10px;
            flex-shrink: 0;
        }

        .connect-button:hover {
            background-color: #3d3d3d;
        }

        /* Event cards */
        .event-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .event-date {
            width: 50px;
            height: 60px;
            background-color: #f2fc86;
            color: #121212;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .event-month {
            font-size: 12px;
            font-weight: bold;
        }

        .event-day {
            font-size: 20px;
            font-weight: bold;
        }

        .event-info {
            flex-grow: 1;
        }

        .event-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .event-location,
        .event-time,
        .event-attendees {
            margin: 0 0 5px 0;
            font-size: 13px;
            color: #bbbbbb;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .event-button {
            background-color: #03dac6;
            color: #121212;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            flex-shrink: 0;
        }

        /* Initiative cards */
        .initiative-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: flex-start;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .initiative-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #2d4263;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .initiative-icon i {
            font-size: 20px;
            color: #03dac6;
        }

        .initiative-info {
            flex-grow: 1;
        }

        .initiative-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .initiative-org {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: #f2fc86;
        }

        .initiative-progress {
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background-color: #2d2d2d;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background-color: #03dac6;
        }

        .progress-text {
            font-size: 12px;
            color: #bbbbbb;
        }

        .initiative-description {
            margin: 0;
            font-size: 13px;
            color: #e0e0e0;
            line-height: 1.4;
        }

        .initiative-button {
            background-color: #03dac6;
            color: #121212;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            flex-shrink: 0;
        }

        /* Company cards */
        .company-connection-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .company-logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #2d4263;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .company-logo i {
            font-size: 20px;
            color: #03dac6;
        }

        .company-info {
            flex-grow: 1;
        }

        .company-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .company-type {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: #f2fc86;
        }

        .company-followers {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: #888;
        }

        .company-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .company-tag {
            background-color: #2d2d2d;
            color: #03dac6;
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
        }

        .follow-button {
            background-color: #f2fc86;
            color: #121212;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            flex-shrink: 0;
        }

        /* Splash screen styles */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-background-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: var(--z-index-modal);
            opacity: 0;
            transition: opacity 20ms ease-in-out;
        }

        #splash-screen.visible {
            opacity: 1;
        }

        #splash-logo {
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--color-background-secondary);
            border-radius: 50%;
        }

        #splash-logo i {
            font-size: 80px;
            color: var(--color-primary);
        }

        .media-buttons {
            display: flex;
            margin: 10px 0;
        }

        .camera-button {
            background-color: #2d2d2d;
            color: #f2fc86;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .camera-button:hover {
            background-color: #3d3d3d;
            transform: scale(1.05);
        }

        .camera-button i {
            font-size: 18px;
        }

        .media-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 8px;
            display: block;
        }

        .media-container {
            position: relative;
            display: inline-block;
            margin-top: 10px;
        }

        .remove-media {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        /* Enhanced highlighted connections section */
        .highlighted-connections {
            margin-bottom: 25px;
        }

        .highlighted-cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .connection-card.highlighted {
            border-left: 3px solid #f2fc86;
            background-color: rgba(45, 45, 45, 0.8);
            padding: 15px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 15px;
            align-items: start;
        }

        .connection-profile {
            position: relative;
        }

        .connection-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            position: relative;
            border: 2px solid #3d3d3d;
        }

        .connection-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .connection-avatar.premium {
            border-color: #f2fc86;
        }

        .connection-avatar.company {
            border-color: #03dac6;
        }

        .connection-status {
            position: absolute;
            bottom: 3px;
            right: 3px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #4CAF50;
            border: 2px solid #2d2d2d;
        }

        .connection-badge {
            position: absolute;
            top: -10px;
            left: -10px;
            background-color: #f2fc86;
            color: #121212;
            font-size: 0.7em;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
        }

        .connection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .connection-location {
            font-size: 0.8em;
            color: #bbbbbb;
        }

        .connection-bio {
            margin: 8px 0;
            font-size: 0.9em;
            color: #e0e0e0;
            line-height: 1.4;
        }

        .mutual-highlight {
            color: #03dac6;
            font-weight: 500;
        }

        .connection-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .view-profile-button {
            background-color: transparent;
            border: 1px solid #bbbbbb;
            color: #bbbbbb;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .view-profile-button:hover {
            background-color: rgba(187, 187, 187, 0.1);
            color: #ffffff;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .connection-card.highlighted {
                grid-template-columns: 1fr;
            }

            .connection-profile {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .connection-actions {
                flex-direction: row;
                justify-content: space-between;
                width: 100%;
            }

            .connection-actions button {
                flex: 1;
            }
        }

        /* Swipeable highlighted connections styling */
        .highlighted-connections {
            margin-bottom: 25px;
            position: relative;
        }

        .swipe-indicator {
            display: inline-block;
            margin-left: 10px;
            color: #f2fc86;
            animation: bounce 1.5s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(5px);
            }
        }

        .highlighted-cards-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        .highlighted-cards {
            display: flex;
            width: 300%;
            /* For 3 cards */
            transition: transform 0.3s ease;
        }

        .connection-card.highlighted {
            flex: 0 0 33.333%;
            /* For 3 cards */
            border-left: 3px solid #f2fc86;
            background-color: rgba(45, 45, 45, 0.8);
            padding: 15px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 15px;
            align-items: start;
        }

        /* Pagination dots */
        .pagination-dots {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            gap: 8px;
        }

        .pagination-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(242, 252, 134, 0.3);
            transition: all 0.3s ease;
        }

        .pagination-dot.active {
            background-color: #f2fc86;
            transform: scale(1.2);
        }

        /* Rest of the styling remains the same */
        .connection-profile {
            position: relative;
        }

        .connection-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            position: relative;
            border: 2px solid #3d3d3d;
        }

        .connection-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .connection-avatar.premium {
            border-color: #f2fc86;
        }

        .connection-avatar.company {
            border-color: #03dac6;
        }

        .connection-status {
            position: absolute;
            bottom: 3px;
            right: 3px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #4CAF50;
            border: 2px solid #2d2d2d;
        }

        .connection-badge {
            position: absolute;
            top: -10px;
            left: -10px;
            background-color: #f2fc86;
            color: #121212;
            font-size: 0.7em;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .connection-card.highlighted {
                grid-template-columns: 1fr;
            }

            .connection-profile {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .connection-actions {
                flex-direction: row;
                justify-content: space-between;
                width: 100%;
            }

            .connection-actions button {
                flex: 1;
            }
        }
    </style>
</head>

<body>
    <!-- Splash Screen -->
    <div id="splash-screen">
        <div id="splash-logo">
            <i class="fas fa-leaf"></i>
        </div>
    </div>

    <!-- Audio element for splash sound -->
    <audio id="splash-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-modern-technology-select-3124.mp3" type="audio/mpeg">
    </audio>

    <!-- Rest of your content -->
    <div class="container">


        <div id="start-screen" class="screen active">
            <div class="nav-arrow" onclick="showScreen('hub')">←</div>




            <!-- Earth container with increased size -->
            <div id="earth-container"></div>

        </div>

        <div id="hub" class="screen">
            <div class="nav-arrow" onclick="showScreen('start-screen')">←</div>
            <h2>Impact Hub</h2>
            <p class="section-intro">Discover inspiring content about positive environmental change</p>

            <!-- Featured content carousel -->
            <div class="featured-carousel">
                <div class="featured-item active">
                    <div class="featured-overlay">
                        <span class="content-tag live">LIVE NOW</span>
                        <h3>Ocean Cleanup Operation</h3>
                        <p>Join the live stream of our Pacific garbage patch cleanup mission</p>
                        <button class="watch-button"><i class="fas fa-play-circle"></i> Watch</button>
                    </div>
                    <img src="https://images.unsplash.com/photo-1621451537084-482c73073a0f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                        alt="Ocean Cleanup">
                </div>
            </div>

            <!-- Content categories -->
            <div class="content-categories">
                <button class="category-button active">All</button>
                <button class="category-button">Livestreams</button>
                <button class="category-button">Documentaries</button>
                <button class="category-button">Vlogs</button>
                <button class="category-button">Movies</button>
            </div>

            <!-- Content grid -->
            <div class="content-grid">
                <!-- Livestream -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag live">LIVE</span>
                        <img src="https://images.unsplash.com/photo-1516937941344-00b4e0337589?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Rainforest Conservation">
                        <div class="content-duration">LIVE</div>
                    </div>
                    <div class="content-info">
                        <h4>Rainforest Conservation Efforts</h4>
                        <p class="content-creator">By Conservation International</p>
                        <p class="content-views">2.3K watching now</p>
                    </div>
                </div>

                <!-- Documentary -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag documentary">DOCUMENTARY</span>
                        <img src="https://images.unsplash.com/photo-1550358864-518f202c02ba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Coral Reef Restoration">
                        <div class="content-duration">48:32</div>
                    </div>
                    <div class="content-info">
                        <h4>Reviving Coral: The Great Barrier Reef Project</h4>
                        <p class="content-creator">By Ocean Alliance</p>
                        <p class="content-views">1.2M views • 2 weeks ago</p>
                    </div>
                </div>

                <!-- Vlog -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag vlog">VLOG</span>
                        <img src="https://images.unsplash.com/photo-1605600659873-d808a13e4d2a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Zero Waste Home">
                        <div class="content-duration">12:45</div>
                    </div>
                    <div class="content-info">
                        <h4>My Zero Waste Home Tour</h4>
                        <p class="content-creator">By Sustainable Sarah</p>
                        <p class="content-views">458K views • 5 days ago</p>
                    </div>
                </div>

                <!-- Movie -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag movie">MOVIE</span>
                        <img src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Wilderness">
                        <div class="content-duration">1:42:15</div>
                    </div>
                    <div class="content-info">
                        <h4>The Last Wilderness</h4>
                        <p class="content-creator">By EcoFilms Productions</p>
                        <p class="content-views">3.4M views • 1 month ago</p>
                    </div>
                </div>

                <!-- Documentary -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag documentary">DOCUMENTARY</span>
                        <img src="https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Green Energy">
                        <div class="content-duration">52:18</div>
                    </div>
                    <div class="content-info">
                        <h4>Powering Tomorrow: The Renewable Revolution</h4>
                        <p class="content-creator">By Future Energy Institute</p>
                        <p class="content-views">876K views • 3 weeks ago</p>
                    </div>
                </div>

                <!-- Vlog -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag vlog">VLOG</span>
                        <img src="https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Urban Garden">
                        <div class="content-duration">18:22</div>
                    </div>
                    <div class="content-info">
                        <h4>Building My Urban Rooftop Garden</h4>
                        <p class="content-creator">By City Farmer Mike</p>
                        <p class="content-views">245K views • 1 week ago</p>
                    </div>
                </div>

                <!-- Livestream -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag live">LIVE</span>
                        <img src="https://images.unsplash.com/photo-1500595046743-cd271d694d30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80"
                            alt="Wildlife Sanctuary">
                        <div class="content-duration">LIVE</div>
                    </div>
                    <div class="content-info">
                        <h4>Wildlife Sanctuary Cam: Elephant Habitat</h4>
                        <p class="content-creator">By Global Wildlife Fund</p>
                        <p class="content-views">5.7K watching now</p>
                    </div>
                </div>

                <!-- Movie -->
                <div class="content-card">
                    <div class="content-thumbnail">
                        <span class="content-tag movie">MOVIE</span>
                        <img src="https://images.unsplash.com/photo-1518709268805-4e9042af9f23?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=884&q=80"
                            alt="Ocean Life">
                        <div class="content-duration">1:58:42</div>
                    </div>
                    <div class="content-info">
                        <h4>Blue Planet: Unseen Depths</h4>
                        <p class="content-creator">By Ocean Media</p>
                        <p class="content-views">2.1M views • 2 months ago</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="certified" class="screen">
            <div class="nav-arrow" onclick="showScreen('start-screen')">←</div>
            <h2>Certified Companies</h2>
            <p class="section-intro">These companies have met our rigorous environmental and ethical standards.</p>

            <div class="company-list">
                <!-- Large Tech Company -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-leaf company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>EcoTech Solutions <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Large Enterprise • Tech</span>
                        <p>Carbon-neutral data centers and sustainable hardware manufacturing. Reduced emissions by 75%
                            since 2018.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-recycle"></i> Zero Waste</span>
                            <span class="badge"><i class="fas fa-solar-panel"></i> 100% Renewable</span>
                        </div>
                    </div>
                </div>

                <!-- Small Family Business -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-seedling company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>Green Family Farms <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Small Business • Agriculture</span>
                        <p>Family-owned organic farm using regenerative agriculture practices for three generations.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-tint"></i> Water Conservation</span>
                            <span class="badge"><i class="fas fa-ban"></i> No Pesticides</span>
                        </div>
                    </div>
                </div>

                <!-- Innovative Startup -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-lightbulb company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>BioCycle Innovations <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Startup • Biotech</span>
                        <p>Pioneering biodegradable alternatives to plastics using mushroom mycelium and agricultural
                            waste.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-flask"></i> Innovative</span>
                            <span class="badge"><i class="fas fa-trash-alt"></i> Plastic Alternative</span>
                        </div>
                    </div>
                </div>

                <!-- Manufacturing Company -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-industry company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>SustainaBuild <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Medium Enterprise • Manufacturing</span>
                        <p>Construction materials made from recycled content. Closed-loop manufacturing process with
                            zero landfill waste.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-recycle"></i> Circular Economy</span>
                            <span class="badge"><i class="fas fa-building"></i> LEED Certified</span>
                        </div>
                    </div>
                </div>

                <!-- Service Company -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-tshirt company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>EthiCloth <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Small Business • Fashion</span>
                        <p>Ethical clothing brand using organic cotton and providing fair wages throughout their supply
                            chain.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-users"></i> Fair Trade</span>
                            <span class="badge"><i class="fas fa-hand-holding-heart"></i> Community Support</span>
                        </div>
                    </div>
                </div>

                <!-- Energy Company -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-solar-panel company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>SunStream Energy <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Large Enterprise • Energy</span>
                        <p>Affordable renewable energy solutions for homes and businesses. Pioneering community solar
                            projects.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-sun"></i> Solar Provider</span>
                            <span class="badge"><i class="fas fa-battery-full"></i> Storage Solutions</span>
                        </div>
                    </div>
                </div>

                <!-- Food Company -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-utensils company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>NutriEarth Foods <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Medium Enterprise • Food</span>
                        <p>Plant-based food company with compostable packaging and carbon-neutral operations.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-leaf"></i> Plant-Based</span>
                            <span class="badge"><i class="fas fa-box"></i> Eco Packaging</span>
                        </div>
                    </div>
                </div>

                <!-- Transportation -->
                <div class="company-card">
                    <div class="company-logo">
                        <i class="fas fa-bicycle company-icon"></i>
                    </div>
                    <div class="company-info">
                        <h3>GreenCommute <i class="fas fa-check-circle verified-badge"></i></h3>
                        <span class="company-type">Startup • Transportation</span>
                        <p>Electric bike sharing and sustainable urban mobility solutions for smart cities.</p>
                        <div class="company-badges">
                            <span class="badge"><i class="fas fa-charging-station"></i> Electric</span>
                            <span class="badge"><i class="fas fa-city"></i> Urban Mobility</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="original" class="screen">
            <h2>Original Content</h2>
            <p>Content for Original Content section.</p>
        </div>

        <div id="community" class="screen">

            <!-- Add post creation form -->
            <div class="post-form">
                <textarea placeholder="Share your environmental thoughts or initiatives..."></textarea>
                <div class="post-form-actions">

                    <button class="post-button">Post</button>
                </div>
            </div>

            <div class="news-feed">
                <!-- Individual Post -->
                <div class="post">
                    <div class="post-header">
                        <div class="post-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="post-info">
                            <p class="post-author">Sarah Johnson</p>
                            <p class="post-meta">Posted 2 hours ago</p>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>Just finished planting 50 trees with @GreenEarth in our local park! Amazing to see the
                            community come together for this initiative. #PlantForTheFuture</p>
                        <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"
                            alt="Tree planting" class="post-image">
                    </div>
                    <div class="post-actions">
                        <div class="post-action"><i class="fas fa-heart"></i> 124</div>
                        <div class="post-action"><i class="fas fa-comment"></i> 18</div>
                        <div class="post-action"><i class="fas fa-share"></i> Share</div>
                    </div>
                </div>

                <!-- Company Post -->
                <div class="post company-post">
                    <div class="post-header">
                        <div class="post-avatar">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="post-info">
                            <p class="post-author">EcoSolutions Inc. <i class="fas fa-check-circle verified-badge"></i>
                            </p>
                            <p class="post-meta">Posted yesterday</p>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>We're excited to announce our new zero-waste packaging initiative! Starting next month, all
                            our products will ship in 100% compostable materials. Together, we can reduce plastic waste.
                        </p>
                    </div>
                    <div class="post-actions">
                        <div class="post-action"><i class="fas fa-heart"></i> 342</div>
                        <div class="post-action"><i class="fas fa-comment"></i> 57</div>
                        <div class="post-action"><i class="fas fa-share"></i> Share</div>
                    </div>
                </div>

                <!-- Another User Post -->
                <div class="post">
                    <div class="post-header">
                        <div class="post-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="post-info">
                            <p class="post-author">Miguel Rodriguez</p>
                            <p class="post-meta">Posted 3 days ago</p>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>My solar panel installation is finally complete! Excited to be generating my own clean
                            energy. Has anyone else made the switch? Any tips for maximizing efficiency?</p>
                        <img src="https://images.unsplash.com/photo-1509391366360-2e959784a276?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"
                            alt="Solar panels" class="post-image">
                    </div>
                    <div class="post-actions">
                        <div class="post-action"><i class="fas fa-heart"></i> 89</div>
                        <div class="post-action"><i class="fas fa-comment"></i> 32</div>
                        <div class="post-action"><i class="fas fa-share"></i> Share</div>
                    </div>
                </div>

                <!-- Another Company Post -->
                <div class="post company-post">
                    <div class="post-header">
                        <div class="post-avatar">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="post-info">
                            <p class="post-author">GreenEarth Foundation <i
                                    class="fas fa-check-circle verified-badge"></i></p>
                            <p class="post-meta">Posted 4 days ago</p>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>Thank you to all 200+ volunteers who joined our beach cleanup last weekend! Together we
                            collected over 500kg of plastic waste. Join us next month for our river cleanup event!</p>
                        <img src="https://images.unsplash.com/photo-1618477461853-cf6ed80faba5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                            alt="Beach cleanup" class="post-image">
                    </div>
                    <div class="post-actions">
                        <div class="post-action"><i class="fas fa-heart"></i> 276</div>
                        <div class="post-action"><i class="fas fa-comment"></i> 42</div>
                        <div class="post-action"><i class="fas fa-share"></i> Share</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="connections" class="screen">
            <div class="nav-arrow" onclick="showScreen('start-screen')">←</div>
            <p class="section-intro">Discover people, events, and initiatives aligned with your environmental interests
            </p>

            <!-- Search bar -->
            <div class="search-container">
                <div class="search-bar">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" placeholder="Search for people, events, or initiatives...">
                </div>
            </div>

            <!-- Connection categories -->
            <div class="connection-tabs">
                <button class="connection-tab active">People</button>
                <button class="connection-tab">Events</button>
                <button class="connection-tab">Initiatives</button>
                <button class="connection-tab">Companies</button>
            </div>

            <!-- Horizontally swipeable highlighted connections -->
            <div class="highlighted-connections">
                <h3 class="section-title">Recommended For You <span class="swipe-indicator"><i
                            class="fas fa-chevron-right"></i></span></h3>

                <div class="highlighted-cards-container">
                    <div class="highlighted-cards">
                        <!-- Enhanced Highlighted Person -->
                        <div class="connection-card highlighted">
                            <div class="connection-profile">
                                <div class="connection-avatar premium">
                                    <img src="https://randomuser.me/api/portraits/women/42.jpg" alt="Dr. Emma Winters">
                                    <span class="connection-status online"></span>
                                </div>
                                <div class="connection-badge"><i class="fas fa-star"></i> Top in field</div>
                            </div>
                            <div class="connection-info">
                                <div class="connection-header">
                                    <h4>Dr. Emma Winters</h4>
                                    <span class="connection-location"><i class="fas fa-map-marker-alt"></i> London,
                                        UK</span>
                                </div>
                                <p class="connection-detail">Climate Policy Expert & UN Advisor</p>
                                <p class="connection-bio">Leading research on climate adaptation strategies for coastal
                                    cities. Published author with 15+ years experience in environmental policy.</p>
                                <p class="connection-mutual"><i class="fas fa-user-friends"></i> 8 mutual connections
                                    including <span class="mutual-highlight">James Wilson</span></p>
                                <div class="connection-tags">
                                    <span class="connection-tag">Policy Reform</span>
                                    <span class="connection-tag">Advocacy</span>
                                    <span class="connection-tag">Climate Adaptation</span>
                                </div>
                            </div>
                            <div class="connection-actions">
                                <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                                <button class="view-profile-button"><i class="fas fa-user"></i> View Profile</button>
                            </div>
                        </div>

                        <!-- Enhanced Highlighted Company -->
                        <div class="connection-card highlighted">
                            <div class="connection-profile">
                                <div class="connection-avatar company">
                                    <img src="https://images.unsplash.com/photo-1560179707-f14e90ef3623?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80"
                                        alt="EcoSolutions Inc.">
                                </div>
                                <div class="connection-badge"><i class="fas fa-award"></i> B-Corp Certified</div>
                            </div>
                            <div class="connection-info">
                                <div class="connection-header">
                                    <h4>EcoSolutions Inc. <i class="fas fa-check-circle"
                                            style="color: #03dac6; font-size: 0.8em;"></i></h4>
                                    <span class="connection-location"><i class="fas fa-map-marker-alt"></i> Portland,
                                        OR</span>
                                </div>
                                <p class="connection-detail">Sustainable Products & Circular Economy Solutions</p>
                                <p class="connection-bio">Creating innovative zero-waste products since 2015. Our
                                    mission is to eliminate single-use plastics through affordable, accessible
                                    alternatives.</p>
                                <p class="connection-followers"><i class="fas fa-user-friends"></i> 15.2K followers
                                    including <span class="mutual-highlight">3 connections</span></p>
                                <div class="connection-tags">
                                    <span class="connection-tag">Zero Waste</span>
                                    <span class="connection-tag">B-Corp</span>
                                    <span class="connection-tag">Plastic Alternatives</span>
                                </div>
                            </div>
                            <div class="connection-actions">
                                <button class="follow-button"><i class="fas fa-plus"></i> Follow</button>
                                <button class="view-profile-button"><i class="fas fa-building"></i> View
                                    Company</button>
                            </div>
                        </div>

                        <!-- Additional Highlighted Person -->
                        <div class="connection-card highlighted">
                            <div class="connection-profile">
                                <div class="connection-avatar">
                                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Dr. Marcus Johnson">
                                    <span class="connection-status"></span>
                                </div>
                                <div class="connection-badge"><i class="fas fa-flask"></i> Researcher</div>
                            </div>
                            <div class="connection-info">
                                <div class="connection-header">
                                    <h4>Dr. Marcus Johnson</h4>
                                    <span class="connection-location"><i class="fas fa-map-marker-alt"></i> Berlin,
                                        Germany</span>
                                </div>
                                <p class="connection-detail">Renewable Energy Scientist</p>
                                <p class="connection-bio">Developing next-generation solar cell technology with 30%
                                    higher efficiency. Leading a team of researchers at Berlin Energy Institute.</p>
                                <p class="connection-mutual"><i class="fas fa-user-friends"></i> 4 mutual connections
                                </p>
                                <div class="connection-tags">
                                    <span class="connection-tag">Solar Energy</span>
                                    <span class="connection-tag">Materials Science</span>
                                    <span class="connection-tag">Photovoltaics</span>
                                </div>
                            </div>
                            <div class="connection-actions">
                                <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                                <button class="view-profile-button"><i class="fas fa-user"></i> View Profile</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pagination indicators -->
                    <div class="pagination-dots">
                        <span class="pagination-dot active"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                    </div>
                </div>
            </div>

            <!-- People suggestions -->
            <div class="connection-section active" id="people-section">
                <h3 class="section-title">People You May Know</h3>

                <div class="connection-cards">
                    <!-- Person 1 -->
                    <div class="connection-card">
                        <div class="connection-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="connection-info">
                            <h4>Dr. Maya Chen</h4>
                            <p class="connection-detail">Renewable Energy Researcher</p>
                            <p class="connection-mutual"><i class="fas fa-user-friends"></i> 3 mutual connections</p>
                            <div class="connection-tags">
                                <span class="connection-tag">Solar Energy</span>
                                <span class="connection-tag">Climate Science</span>
                            </div>
                        </div>
                        <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                    </div>

                    <!-- Person 2 -->
                    <div class="connection-card">
                        <div class="connection-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="connection-info">
                            <h4>James Wilson</h4>
                            <p class="connection-detail">Urban Farming Advocate</p>
                            <p class="connection-mutual"><i class="fas fa-user-friends"></i> 5 mutual connections</p>
                            <div class="connection-tags">
                                <span class="connection-tag">Food Security</span>
                                <span class="connection-tag">Community Gardens</span>
                            </div>
                        </div>
                        <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                    </div>

                    <!-- Person 3 -->
                    <div class="connection-card">
                        <div class="connection-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="connection-info">
                            <h4>Sophia Rodriguez</h4>
                            <p class="connection-detail">Sustainable Fashion Designer</p>
                            <p class="connection-mutual"><i class="fas fa-user-friends"></i> 2 mutual connections</p>
                            <div class="connection-tags">
                                <span class="connection-tag">Ethical Fashion</span>
                                <span class="connection-tag">Upcycling</span>
                            </div>
                        </div>
                        <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                    </div>

                    <!-- Person 4 -->
                    <div class="connection-card">
                        <div class="connection-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="connection-info">
                            <h4>Aiden Patel</h4>
                            <p class="connection-detail">Green Tech Entrepreneur</p>
                            <p class="connection-mutual"><i class="fas fa-user-friends"></i> 7 mutual connections</p>
                            <div class="connection-tags">
                                <span class="connection-tag">Clean Energy</span>
                                <span class="connection-tag">Startups</span>
                            </div>
                        </div>
                        <button class="connect-button"><i class="fas fa-plus"></i> Connect</button>
                    </div>
                </div>
            </div>

            <!-- Events suggestions (initially hidden) -->
            <div class="connection-section" id="events-section">
                <h3 class="section-title">Upcoming Events Near You</h3>

                <div class="connection-cards">
                    <!-- Event 1 -->
                    <div class="event-card">
                        <div class="event-date">
                            <div class="event-month">JUN</div>
                            <div class="event-day">15</div>
                        </div>
                        <div class="event-info">
                            <h4>Community Solar Workshop</h4>
                            <p class="event-location"><i class="fas fa-map-marker-alt"></i> Green Tech Hub, Downtown</p>
                            <p class="event-time"><i class="far fa-clock"></i> 2:00 PM - 5:00 PM</p>
                            <p class="event-attendees"><i class="fas fa-users"></i> 34 people attending</p>
                        </div>
                        <button class="event-button">Attend</button>
                    </div>

                    <!-- Event 2 -->
                    <div class="event-card">
                        <div class="event-date">
                            <div class="event-month">JUN</div>
                            <div class="event-day">22</div>
                        </div>
                        <div class="event-info">
                            <h4>Riverside Cleanup Day</h4>
                            <p class="event-location"><i class="fas fa-map-marker-alt"></i> Riverfront Park</p>
                            <p class="event-time"><i class="far fa-clock"></i> 9:00 AM - 12:00 PM</p>
                            <p class="event-attendees"><i class="fas fa-users"></i> 78 people attending</p>
                        </div>
                        <button class="event-button">Attend</button>
                    </div>

                    <!-- Event 3 -->
                    <div class="event-card">
                        <div class="event-date">
                            <div class="event-month">JUL</div>
                            <div class="event-day">05</div>
                        </div>
                        <div class="event-info">
                            <h4>Sustainable Home Energy Fair</h4>
                            <p class="event-location"><i class="fas fa-map-marker-alt"></i> City Convention Center</p>
                            <p class="event-time"><i class="far fa-clock"></i> 10:00 AM - 4:00 PM</p>
                            <p class="event-attendees"><i class="fas fa-users"></i> 125 people attending</p>
                        </div>
                        <button class="event-button">Attend</button>
                    </div>
                </div>
            </div>

            <!-- Initiatives suggestions (initially hidden) -->
            <div class="connection-section" id="initiatives-section">
                <h3 class="section-title">Initiatives You Can Join</h3>

                <div class="connection-cards">
                    <!-- Initiative 1 -->
                    <div class="initiative-card">
                        <div class="initiative-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <div class="initiative-info">
                            <h4>Urban Tree Planting Project</h4>
                            <p class="initiative-org">By: City Green Alliance</p>
                            <div class="initiative-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <span class="progress-text">65% to goal (650/1000 trees)</span>
                            </div>
                            <p class="initiative-description">Help increase urban tree canopy by planting trees in
                                neighborhoods with low green coverage.</p>
                        </div>
                        <button class="initiative-button">Join</button>
                    </div>

                    <!-- Initiative 2 -->
                    <div class="initiative-card">
                        <div class="initiative-icon">
                            <i class="fas fa-solar-panel"></i>
                        </div>
                        <div class="initiative-info">
                            <h4>Community Solar Co-op</h4>
                            <p class="initiative-org">By: Renewable Neighbors</p>
                            <div class="initiative-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 42%"></div>
                                </div>
                                <span class="progress-text">42% to goal (84/200 members)</span>
                            </div>
                            <p class="initiative-description">Join our cooperative to install shared solar panels and
                                distribute clean energy to members.</p>
                        </div>
                        <button class="initiative-button">Join</button>
                    </div>

                    <!-- Initiative 3 -->
                    <div class="initiative-card">
                        <div class="initiative-icon">
                            <i class="fas fa-recycle"></i>
                        </div>
                        <div class="initiative-info">
                            <h4>Zero Waste Challenge</h4>
                            <p class="initiative-org">By: EcoLifestyle Network</p>
                            <div class="initiative-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%"></div>
                                </div>
                                <span class="progress-text">78% to goal (1560/2000 participants)</span>
                            </div>
                            <p class="initiative-description">30-day challenge to reduce household waste through simple
                                daily actions and community support.</p>
                        </div>
                        <button class="initiative-button">Join</button>
                    </div>
                </div>
            </div>

            <!-- Companies suggestions (initially hidden) -->
            <div class="connection-section" id="companies-section">
                <h3 class="section-title">Companies To Follow</h3>

                <div class="connection-cards">
                    <!-- Company 1 -->
                    <div class="company-connection-card">
                        <div class="company-logo">
                            <i class="fas fa-charging-station"></i>
                        </div>
                        <div class="company-info">
                            <h4>ElectriCharge Networks <i class="fas fa-check-circle verified-badge"></i></h4>
                            <p class="company-type">EV Charging Infrastructure</p>
                            <p class="company-followers"><i class="fas fa-user-friends"></i> 12.5K followers</p>
                            <div class="company-tags">
                                <span class="company-tag">Electric Mobility</span>
                                <span class="company-tag">Smart Grid</span>
                            </div>
                        </div>
                        <button class="follow-button">Follow</button>
                    </div>

                    <!-- Company 2 -->
                    <div class="company-connection-card">
                        <div class="company-logo">
                            <i class="fas fa-water"></i>
                        </div>
                        <div class="company-info">
                            <h4>AquaPure Technologies <i class="fas fa-check-circle verified-badge"></i></h4>
                            <p class="company-type">Water Conservation Solutions</p>
                            <p class="company-followers"><i class="fas fa-user-friends"></i> 8.3K followers</p>
                            <div class="company-tags">
                                <span class="company-tag">Clean Water</span>
                                <span class="company-tag">Resource Efficiency</span>
                            </div>
                        </div>
                        <button class="follow-button">Follow</button>
                    </div>

                    <!-- Company 3 -->
                    <div class="company-connection-card">
                        <div class="company-logo">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="company-info">
                            <h4>GreenCode Solutions <i class="fas fa-check-circle verified-badge"></i></h4>
                            <p class="company-type">Sustainable Software Development</p>
                            <p class="company-followers"><i class="fas fa-user-friends"></i> 5.7K followers</p>
                            <div class="company-tags">
                                <span class="company-tag">Green IT</span>
                                <span class="company-tag">Energy Efficient</span>
                            </div>
                        </div>
                        <button class="follow-button">Follow</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav class="bottom-nav">
            <a href="javascript:void(0)" class="nav-button" onclick="showScreen('hub')">
                <i class="fas fa-photo-video"></i>
                <span>Original Content</span>
            </a>
            <a href="javascript:void(0)" class="nav-button" onclick="showScreen('certified')">
                <i class="fas fa-certificate"></i>
                <span>Certified</span>
            </a>
            <a href="javascript:void(0)" class="nav-button" onclick="showScreen('community')">
                <i class="fas fa-users"></i>
                <span>Community</span>
            </a>
            <a href="javascript:void(0)" class="nav-button" onclick="showScreen('connections')">
                <i class="fas fa-heart"></i>
                <span>Connections</span>
            </a>
        </nav>
    </div>

    <!-- Script to handle tab navigation -->
    <script>
        // Function to show a specific screen
        function showScreen(screenId) {
            // Hide all screens
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => {
                screen.classList.remove('active');
            });

            // Show the selected screen
            const activeScreen = document.getElementById(screenId);
            if (activeScreen) {
                activeScreen.classList.add('active');

                // Initialize Earth if showing start screen
                if (screenId === 'start-screen') {
                    setTimeout(initEarth, 100);
                }

                // Update active nav button
                updateActiveNav(screenId);

                // Update URL hash without scrolling
                history.replaceState(null, null, '#' + screenId);
            }
        }

        // Update active nav button
        function updateActiveNav(screenId) {
            const navButtons = document.querySelectorAll('.nav-button');

            navButtons.forEach(button => {
                // Extract the target screen from the onclick attribute
                const onclickAttr = button.getAttribute('onclick');
                const targetScreen = onclickAttr ? onclickAttr.match(/showScreen\('(.+?)'\)/)[1] : null;

                if (targetScreen === screenId) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }

        // Handle initial load and back/forward navigation
        window.addEventListener('load', function () {
            const hash = window.location.hash.substring(1) || 'start-screen';
            showScreen(hash);
        });

        window.addEventListener('hashchange', function () {
            const hash = window.location.hash.substring(1) || 'start-screen';
            showScreen(hash);
        });

        // Prevent default scroll behavior
        document.body.addEventListener('touchmove', function (e) {
            // Allow scrolling within screens but not between them
            if (!e.target.closest('.screen')) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>

    <!-- Earth.js script -->
    <script>
        // Initialize Three.js Earth
        function initEarth() {
            // Only initialize if the start screen is visible
            if (!document.getElementById('start-screen').classList.contains('active')) {
                return;
            }

            // Create scene
            const scene = new THREE.Scene();

            // Create camera
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 2.2;

            // Create renderer with mobile optimizations
            const container = document.getElementById('earth-container');

            // Clear any existing content
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }

            const renderer = new THREE.WebGLRenderer({
                antialias: false, // Disable antialiasing on mobile for performance
                alpha: true,
                powerPreference: 'high-performance'
            });

            // Set size to full window
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Limit pixel ratio for performance on mobile
            const pixelRatio = Math.min(window.devicePixelRatio, 2);
            renderer.setPixelRatio(pixelRatio);

            container.appendChild(renderer.domElement);

            // Add ambient light
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);

            // Add directional light (sun)
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);

            // Create earth with appropriate polygon count
            const isMobile = window.innerWidth < 768;
            const segmentDetail = isMobile ? 32 : 64; // Lower detail on mobile

            const earthGeometry = new THREE.SphereGeometry(1, segmentDetail, segmentDetail);

            // Load textures
            const textureLoader = new THREE.TextureLoader();

            // Use appropriate resolution textures based on device
            const textureQuality = isMobile ? '2048' : '8192';

            // These fallback to standard resolution to ensure performance
            const earthTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg');
            const bumpMap = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_normal_2048.jpg');
            const specularMap = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_specular_2048.jpg');

            // Create material with textures
            const earthMaterial = new THREE.MeshPhongMaterial({
                map: earthTexture,
                bumpScale: 0.05,
                specularMap: specularMap,
                specular: new THREE.Color('grey'),
                shininess: 5
            });

            // Create earth mesh
            const earth = new THREE.Mesh(earthGeometry, earthMaterial);
            scene.add(earth);

            // Add clouds with appropriate detail
            const cloudGeometry = new THREE.SphereGeometry(1.02, segmentDetail, segmentDetail);
            const cloudTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_clouds_1024.png');
            const cloudMaterial = new THREE.MeshPhongMaterial({
                map: cloudTexture,
                transparent: true,
                opacity: 0.4
            });

            const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
            scene.add(clouds);

            // Add city markers for American cities
            const cities = [
                { name: "New York", lat: 40.7128, lng: -74.0060 },
                { name: "Los Angeles", lat: 34.0522, lng: -118.2437 },
                { name: "Chicago", lat: 41.8781, lng: -87.6298 },
                { name: "Houston", lat: 29.7604, lng: -95.3698 },
                { name: "San Francisco", lat: 37.7749, lng: -122.4194 },
                { name: "Miami", lat: 25.7617, lng: -80.1918 },
                { name: "Seattle", lat: 47.6062, lng: -122.3321 },
                { name: "Denver", lat: 39.7392, lng: -104.9903 },
                { name: "Mexico City", lat: 19.4326, lng: -99.1332 },
                { name: "Toronto", lat: 43.6532, lng: -79.3832 },
                { name: "São Paulo", lat: -23.5505, lng: -46.6333 },
                { name: "Buenos Aires", lat: -34.6037, lng: -58.3816 }
            ];

            // Function to convert lat/lng to 3D position
            function latLngToVector3(lat, lng, radius) {
                const phi = (90 - lat) * (Math.PI / 180);
                const theta = (lng + 180) * (Math.PI / 180);

                const x = -radius * Math.sin(phi) * Math.cos(theta);
                const y = radius * Math.cos(phi);
                const z = radius * Math.sin(phi) * Math.sin(theta);

                return new THREE.Vector3(x, y, z);
            }

            // Store all city objects for raycasting
            const cityObjects = [];
            const cityMarkers = [];

            // Create city markers
            cities.forEach(city => {
                // Position marker
                const position = latLngToVector3(city.lat, city.lng, 1.02);

                // Store local position for intersection calculations
                const localPosition = position.clone();

                // Create marker
                const markerGeometry = new THREE.SphereGeometry(0.01, 16, 16);
                const markerMaterial = new THREE.MeshBasicMaterial({
                    color: 0xf2fc86,
                    transparent: true,
                    opacity: 0.7
                });
                const marker = new THREE.Mesh(markerGeometry, markerMaterial);

                // Add glow effect
                const glowGeometry = new THREE.SphereGeometry(0.015, 16, 16);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: 0xf2fc86,
                    transparent: true,
                    opacity: 0.0
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                glow.position.copy(position);

                // Create text label
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 128;
                canvas.height = 64;

                context.fillStyle = 'rgba(0, 0, 0, 0.0)';
                context.fillRect(0, 0, canvas.width, canvas.height);

                context.font = '24px Arial';
                context.fillStyle = '#ffffff';
                context.textAlign = 'center';
                context.textBaseline = 'middle';
                context.fillText(city.name, canvas.width / 2, canvas.height / 2);

                const texture = new THREE.CanvasTexture(canvas);
                const labelMaterial = new THREE.SpriteMaterial({
                    map: texture,
                    transparent: true,
                    opacity: 0 // Start with invisible labels
                });

                const label = new THREE.Sprite(labelMaterial);
                label.position.copy(position.clone().multiplyScalar(1.1));
                label.scale.set(0.2, 0.1, 1);

                // Add to earth instead of scene
                earth.add(marker);
                earth.add(glow);
                earth.add(label);

                // Store city data for interaction
                marker.userData = {
                    cityName: city.name,
                    position: position,
                    glow: glow,
                    label: label,
                    defaultScale: marker.scale.clone(),
                    highlighted: false,
                    pulseAnimation: {
                        offset: Math.random() * Math.PI * 2, // Random starting phase
                        update: function (time) {
                            const scale = 1 + 0.2 * Math.sin(time * 0.002 + this.offset);
                            glow.scale.set(scale, scale, scale);
                        }
                    }
                };

                // Add to arrays for raycasting
                cityObjects.push(marker);
                cityMarkers.push({
                    marker: marker,
                    glow: glow,
                    label: label,
                    position: position,
                    localPosition: localPosition // Store the local position
                });
            });

            // Setup raycaster for mouse interaction
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();

            // Track mouse position
            function onMouseMove(event) {
                // Calculate mouse position in normalized device coordinates
                // (-1 to +1) for both components
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
            }

            // Add mouse move listener
            window.addEventListener('mousemove', onMouseMove, false);

            // Handle touch events for mobile
            function onTouchMove(event) {
                if (event.touches.length > 0) {
                    // Prevent default behavior to avoid scrolling
                    event.preventDefault();

                    // Use the first touch point
                    const touch = event.touches[0];
                    mouse.x = (touch.clientX / window.innerWidth) * 2 - 1;
                    mouse.y = - (touch.clientY / window.innerHeight) * 2 + 1;
                }
            }

            // Add touch listeners
            window.addEventListener('touchmove', onTouchMove, { passive: false });

            // Function to handle mouse/touch interaction with the globe
            function handleInteraction() {
                // Update the picking ray with the camera and mouse position
                raycaster.setFromCamera(mouse, camera);

                // Calculate objects intersecting the picking ray
                const intersects = raycaster.intersectObject(earth, true);

                // Reset all markers to default state
                cityMarkers.forEach(city => {
                    // Gradually reduce opacity if not highlighted
                    if (!city.marker.userData.highlighted) {
                        city.label.material.opacity *= 0.95;
                        if (city.label.material.opacity < 0.01) city.label.material.opacity = 0;
                    }

                    city.marker.userData.highlighted = false;
                    city.marker.scale.copy(city.marker.userData.defaultScale);
                });

                // If we intersect with the earth
                if (intersects.length > 0) {
                    // Get the intersection point in world space
                    const worldIntersectionPoint = intersects[0].point.clone();

                    // Convert to local space of the earth to account for rotation
                    const localIntersectionPoint = earth.worldToLocal(worldIntersectionPoint);

                    // Find cities near the intersection point
                    cityMarkers.forEach(city => {
                        // Calculate distance using the local coordinates
                        const distance = localIntersectionPoint.distanceTo(city.localPosition);

                        // If close enough, highlight the city
                        if (distance < 0.3) { // Adjust this threshold as needed
                            // Calculate opacity based on distance (closer = more visible)
                            const opacity = Math.max(0, 1 - (distance * 3));

                            // Update label opacity
                            city.label.material.opacity = opacity;

                            // Scale marker based on proximity
                            const scale = 1 + (0.5 * (1 - distance * 3));
                            city.marker.scale.set(scale, scale, scale);

                            // Mark as highlighted
                            city.marker.userData.highlighted = true;
                        }
                    });
                }
            }

            // Add orbit controls with mobile-friendly settings
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.1; // More responsive damping for touch
            controls.rotateSpeed = 0.7; // Faster rotation for better touch response
            controls.panSpeed = 0.8; // Faster panning
            controls.minDistance = 1.2;
            controls.maxDistance = 4;
            controls.enableZoom = true;
            controls.zoomSpeed = 1.2; // Faster zoom for mobile
            controls.touches = {
                ONE: THREE.TOUCH.ROTATE,
                TWO: THREE.TOUCH.DOLLY_PAN
            };

            // Animation loop with performance considerations
            let lastTime = 0;
            const rotationSpeed = isMobile ? 0.0001 : 0.00005; // Slower rotation on mobile

            function animate(time) {
                requestAnimationFrame(animate);

                // Calculate delta time for smoother animation
                const delta = time - lastTime;
                lastTime = time;

                // Only update rotation and render if start screen is active
                if (document.getElementById('start-screen').classList.contains('active')) {
                    // Slowly rotate earth and clouds
                    earth.rotation.y += rotationSpeed * delta;
                    clouds.rotation.y += rotationSpeed * 1.4 * delta;

                    // Update marker animations
                    cityObjects.forEach(object => {
                        if (object.userData && object.userData.pulseAnimation) {
                            object.userData.pulseAnimation.update(time);
                        }
                    });

                    // Handle mouse/touch interaction
                    handleInteraction();

                    // Update controls
                    controls.update();

                    // Render scene
                    renderer.render(scene, camera);
                }
            }

            // Handle window resize
            window.addEventListener('resize', function () {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            });

            // Handle device orientation for mobile
            if (window.DeviceOrientationEvent && 'ontouchstart' in window) {
                window.addEventListener('deviceorientation', function (event) {
                    // Only apply if user isn't actively touching the screen
                    if (document.querySelectorAll('.touching').length === 0) {
                        // Subtle rotation based on device tilt
                        const tiltX = event.beta ? event.beta * 0.01 : 0;
                        const tiltY = event.gamma ? event.gamma * 0.01 : 0;

                        earth.rotation.x = THREE.MathUtils.lerp(earth.rotation.x, tiltX, 0.05);
                        earth.rotation.y += rotationSpeed + (tiltY * 0.01);
                    }
                });

                // Track touch state
                container.addEventListener('touchstart', function () {
                    container.classList.add('touching');
                });

                container.addEventListener('touchend', function () {
                    container.classList.remove('touching');
                });
            }

            // Start animation
            animate(0);
        }
    </script>

    <!-- Post creation script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const postButton = document.querySelector('.post-button');
            const postTextarea = document.querySelector('.post-form textarea');
            const newsFeed = document.querySelector('.news-feed');

            // Add camera button to post form
            const postForm = document.querySelector('.post-form');
            const mediaButtonsContainer = document.createElement('div');
            mediaButtonsContainer.className = 'media-buttons';
            mediaButtonsContainer.innerHTML = `
                <button class="camera-button" title="Take photo or video">
                    <i class="fas fa-camera"></i>
                </button>
                <button class="camera-button">
                    <i class="fas fa-image"></i> 
                </button>
                <button class="camera-button">
                    <i class="fas fa-video"></i> 
                </button>
                <button class="camera-button">
                    <i class="fas fa-link"></i> 
                </button>
    
                <input type="file" id="media-input" accept="image/*,video/*" style="display:none">
            `;

            // Insert media buttons before the post button
            const postButtonContainer = postButton.parentElement;
            postForm.insertBefore(mediaButtonsContainer, postButtonContainer);

            // Add styles for media buttons and camera UI
            const style = document.createElement('style');
            style.textContent = `
                .media-buttons {
            display: flex;
                    margin: 10px 0;
                }
                .camera-button {
            background-color: #2d2d2d;
                    color: #f2fc86;
                    border: none;
                    border-radius: 50%;
                    width: 40px;
                    height: 40px;
            display: flex;
                    justify-content: center;
            align-items: center;
                    margin-right: 10px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                .camera-button:hover {
                    background-color: #3d3d3d;
                    transform: scale(1.05);
                }
                .camera-button i {
                    font-size: 18px;
                }
                .media-preview {
                    max-width: 100%;
                    max-height: 200px;
                    margin-top: 10px;
                    border-radius: 8px;
                    display: block;
                }
                .media-container {
                    position: relative;
                    display: inline-block;
                    margin-top: 10px;
                    width: 100%;
                }
                .remove-media {
            position: absolute;
                    top: 5px;
                    right: 5px;
                    background: rgba(0,0,0,0.7);
                    color: white;
                    border: none;
                    border-radius: 50%;
                    width: 24px;
                    height: 24px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    cursor: pointer;
                }
                .camera-ui {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: #000;
                    z-index: 1000;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                }
                .camera-preview {
                    width: 100%;
                    max-height: 80vh;
                    background-color: #000;
                }
                .camera-controls {
                    display: flex;
                    justify-content: space-around;
                    width: 100%;
                    padding: 20px;
                }
                .camera-control-button {
                    background-color: rgba(45, 45, 45, 0.7);
                    color: #fff;
                    border: none;
                    border-radius: 50%;
            width: 60px;
            height: 60px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    cursor: pointer;
                }
                .capture-button {
                    background-color: #f2fc86;
                    color: #000;
                }
                .switch-camera {
                    background-color: rgba(45, 45, 45, 0.7);
                    color: #fff;
                    border: none;
            border-radius: 50%;
                    width: 40px;
                    height: 40px;
                    position: absolute;
                    top: 20px;
                    right: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
                    cursor: pointer;
                }
            `;
            document.head.appendChild(style);

            // Variables for media handling
            const cameraButton = document.querySelector('.camera-button');
            const mediaInput = document.getElementById('media-input');
            let mediaFile = null;
            let mediaPreviewContainer = null;
            let stream = null;
            let facingMode = "user"; // Start with front camera

            // Handle camera button click - open camera UI
            cameraButton.addEventListener('click', function () {
                // Check if browser supports getUserMedia
                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                    // Create camera UI
                    const cameraUI = document.createElement('div');
                    cameraUI.className = 'camera-ui';

                    cameraUI.innerHTML = `
                        <video class="camera-preview" autoplay playsinline></video>
                        <div class="camera-controls">
                            <button class="camera-control-button cancel-button"><i class="fas fa-times"></i></button>
                            <button class="camera-control-button capture-button"><i class="fas fa-camera"></i></button>
                            <button class="camera-control-button switch-mode"><i class="fas fa-video"></i></button>
                        </div>
                        <button class="switch-camera"><i class="fas fa-sync-alt"></i></button
                    `;



                    document.body.appendChild(cameraUI);

                    const videoElement = document.querySelector('.camera-preview');
                    const captureButton = document.querySelector('.capture-button');
                    const cancelButton = document.querySelector('.cancel-button');
                    const switchModeButton = document.querySelector('.switch-mode');
                    const switchCameraButton = document.querySelector('.switch-camera');

                    let isVideoMode = false;
                    let mediaRecorder = null;
                    let recordedChunks = [];

                    // Start camera
                    startCamera();

                    function startCamera() {
                        // Stop any existing stream
                        if (stream) {
                            stream.getTracks().forEach(track => track.stop());
                        }

                        // Get user media with current facing mode
                        navigator.mediaDevices.getUserMedia({
                            video: { facingMode: facingMode },
                            audio: isVideoMode
                        })
                            .then(function (mediaStream) {
                                stream = mediaStream;
                                videoElement.srcObject = mediaStream;

                                // Setup video recording if in video mode
                                if (isVideoMode) {
                                    mediaRecorder = new MediaRecorder(mediaStream);

                                    mediaRecorder.ondataavailable = function (e) {
                                        if (e.data.size > 0) {
                                            recordedChunks.push(e.data);
                                        }
                                    };

                                    mediaRecorder.onstop = function () {
                                        const blob = new Blob(recordedChunks, { type: 'video/webm' });
                                        recordedChunks = [];
                                        handleCapturedMedia(blob, 'video/webm');
                                    };
                                }
                            })
                            .catch(function (error) {
                                console.error("Camera error:", error);
                                // Fallback to file input
                                closeCameraUI();
                                mediaInput.click();
                            });
                    }

                    // Switch between front and back camera
                    switchCameraButton.addEventListener('click', function () {
                        facingMode = facingMode === "user" ? "environment" : "user";
                        startCamera();
                    });

                    // Switch between photo and video mode
                    switchModeButton.addEventListener('click', function () {
                        isVideoMode = !isVideoMode;

                        // Update UI
                        if (isVideoMode) {
                            switchModeButton.innerHTML = '<i class="fas fa-camera"></i>';
                            captureButton.innerHTML = '<i class="fas fa-circle"></i>';
                        } else {
                            switchModeButton.innerHTML = '<i class="fas fa-video"></i>';
                            captureButton.innerHTML = '<i class="fas fa-camera"></i>';
                        }

                        // Restart camera with new settings
                        startCamera();
                    });

                    // Handle capture button
                    let isRecording = false;
                    captureButton.addEventListener('click', function () {
                        if (isVideoMode) {
                            if (!isRecording) {
                                // Start recording
                                recordedChunks = [];
                                mediaRecorder.start();
                                isRecording = true;
                                captureButton.style.backgroundColor = "#ff4136"; // Red recording indicator
                            } else {
                                // Stop recording
                                mediaRecorder.stop();
                                isRecording = false;
                                captureButton.style.backgroundColor = "#f2fc86";
                                closeCameraUI();
                            }
                        } else {
                            // Take photo
                            const canvas = document.createElement('canvas');
                            canvas.width = videoElement.videoWidth;
                            canvas.height = videoElement.videoHeight;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);

                            // Convert to blob
                            canvas.toBlob(function (blob) {
                                handleCapturedMedia(blob, 'image/jpeg');
                                closeCameraUI();
                            }, 'image/jpeg', 0.95);
                        }
                    });

                    // Handle cancel button
                    cancelButton.addEventListener('click', closeCameraUI);

                    function closeCameraUI() {
                        if (stream) {
                            stream.getTracks().forEach(track => track.stop());
                        }
                        if (cameraUI.parentNode) {
                            cameraUI.parentNode.removeChild(cameraUI);
                        }
                    }

                    // Handle captured media (photo or video)
                    function handleCapturedMedia(blob, type) {
                        mediaFile = new File([blob], type.includes('image') ? 'photo.jpg' : 'video.webm', { type: type });

                        // Remove existing preview if any
                        if (mediaPreviewContainer) {
                            mediaPreviewContainer.remove();
                        }

                        // Create preview container
                        mediaPreviewContainer = document.createElement('div');
                        mediaPreviewContainer.className = 'media-container';

                        // Create remove button
                        const removeButton = document.createElement('button');
                        removeButton.className = 'remove-media';
                        removeButton.innerHTML = '<i class="fas fa-times"></i>';
                        removeButton.addEventListener('click', function (e) {
                            e.stopPropagation();
                            mediaPreviewContainer.remove();
                            mediaFile = null;
                            mediaPreviewContainer = null;
                        });

                        // Create preview element based on file type
                        if (type.includes('image')) {
                            const preview = document.createElement('img');
                            preview.className = 'media-preview';
                            preview.src = URL.createObjectURL(blob);
                            mediaPreviewContainer.appendChild(preview);
                        } else {
                            const preview = document.createElement('video');
                            preview.className = 'media-preview';
                            preview.controls = true;
                            preview.src = URL.createObjectURL(blob);
                            mediaPreviewContainer.appendChild(preview);
                        }

                        mediaPreviewContainer.appendChild(removeButton);
                        postForm.insertBefore(mediaPreviewContainer, postButtonContainer);
                    }
                } else {
                    // Fallback for browsers that don't support getUserMedia
                    mediaInput.click();
                }
            });

            // Handle file selection (fallback method)
            mediaInput.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    mediaFile = e.target.files[0];

                    // Remove existing preview if any
                    if (mediaPreviewContainer) {
                        mediaPreviewContainer.remove();
                    }

                    // Create preview container
                    mediaPreviewContainer = document.createElement('div');
                    mediaPreviewContainer.className = 'media-container';

                    // Create remove button
                    const removeButton = document.createElement('button');
                    removeButton.className = 'remove-media';
                    removeButton.innerHTML = '<i class="fas fa-times"></i>';
                    removeButton.addEventListener('click', function (e) {
                        e.stopPropagation();
                        mediaPreviewContainer.remove();
                        mediaFile = null;
                        mediaPreviewContainer = null;
                        mediaInput.value = '';
                    });

                    // Create preview element based on file type
                    if (mediaFile.type.startsWith('image/')) {
                        const preview = document.createElement('img');
                        preview.className = 'media-preview';
                        preview.file = mediaFile;

                        const reader = new FileReader();
                        reader.onload = function (e) {
                            preview.src = e.target.result;
                        };
                        reader.readAsDataURL(mediaFile);

                        mediaPreviewContainer.appendChild(preview);
                    } else if (mediaFile.type.startsWith('video/')) {
                        const preview = document.createElement('video');
                        preview.className = 'media-preview';
                        preview.controls = true;

                        const reader = new FileReader();
                        reader.onload = function (e) {
                            preview.src = e.target.result;
                        };
                        reader.readAsDataURL(mediaFile);

                        mediaPreviewContainer.appendChild(preview);
                    }

                    mediaPreviewContainer.appendChild(removeButton);
                    postForm.insertBefore(mediaPreviewContainer, postButtonContainer);
                }
            });

            // Rest of the code remains the same...
            // Improve textarea experience on mobile
            postTextarea.addEventListener('focus', function () {
                setTimeout(function () {
                    postTextarea.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            });

            // Handle post creation
            postButton.addEventListener('click', function () {
                const postContent = postTextarea.value.trim();
                if (postContent || mediaFile) {
                    // Create new post element
                    const newPost = document.createElement('div');
                    newPost.className = 'post';

                    // Get current date and time
                    const now = new Date();
                    const timeString = 'Just now';

                    // Create post HTML
                    let postHTML = `
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="post-info">
                                <p class="post-author">You</p>
                                <p class="post-meta">Posted ${timeString}</p>
                            </div>
                        </div>
                        <div class="post-content">
                    `;

                    // Add text content if any
                    if (postContent) {
                        postHTML += `<p>${postContent}</p>`;
                    }

                    postHTML += `
                        </div>
                        <div class="post-actions">
                            <div class="post-action"><i class="fas fa-heart"></i> 0</div>
                            <div class="post-action"><i class="fas fa-comment"></i> 0</div>
                            <div class="post-action"><i class="fas fa-share"></i> Share</div>
                        </div>
                    `;

                    newPost.innerHTML = postHTML;

                    // Add media content if any
                    if (mediaFile) {
                        if (mediaFile.type.startsWith('image/')) {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                const mediaElement = document.createElement('img');
                                mediaElement.src = e.target.result;
                                mediaElement.className = 'post-media';
                                mediaElement.style.maxWidth = '100%';
                                mediaElement.style.borderRadius = '8px';
                                mediaElement.style.marginTop = '10px';

                                newPost.querySelector('.post-content').appendChild(mediaElement);
                            };
                            reader.readAsDataURL(mediaFile);
                        } else if (mediaFile.type.startsWith('video/')) {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                const mediaElement = document.createElement('video');
                                mediaElement.src = e.target.result;
                                mediaElement.className = 'post-media';
                                mediaElement.controls = true;
                                mediaElement.style.maxWidth = '100%';
                                mediaElement.style.borderRadius = '8px';
                                mediaElement.style.marginTop = '10px';

                                newPost.querySelector('.post-content').appendChild(mediaElement);
                            };
                            reader.readAsDataURL(mediaFile);
                        }
                    }

                    // Add new post at the top of the feed
                    newsFeed.insertBefore(newPost, newsFeed.firstChild);

                    // Clear the textarea and media
                    postTextarea.value = '';
                    if (mediaPreviewContainer) {
                        mediaPreviewContainer.remove();
                        mediaFile = null;
                        mediaPreviewContainer = null;
                        mediaInput.value = '';
                    }

                    // Hide mobile keyboard
                    postTextarea.blur();
                }
            });

            // Add touch interaction to post actions
            document.addEventListener('click', function (e) {
                if (e.target.closest('.post-action')) {
                    const action = e.target.closest('.post-action');

                    // Simple heart count increment
                    if (action.innerHTML.includes('fa-heart')) {
                        const countEl = action.innerHTML.match(/\d+/);
                        if (countEl) {
                            const count = parseInt(countEl[0]) + 1;
                            action.innerHTML = action.innerHTML.replace(/\d+/, count);

                            // Visual feedback
                            action.style.color = '#03dac6';
                            setTimeout(() => {
                                action.style.color = '';
                            }, 500);
                        }
                    }
                }
            });
        });
    </script>

    <!-- Tab switching functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.connection-tab');
            const sections = document.querySelectorAll('.connection-section');

            tabs.forEach((tab, index) => {
                tab.addEventListener('click', function () {
                    // Remove active class from all tabs and sections
                    tabs.forEach(t => t.classList.remove('active'));
                    sections.forEach(s => s.classList.remove('active'));

                    // Add active class to clicked tab and corresponding section
                    tab.classList.add('active');
                    sections[index].classList.add('active');
                });
            });

            // Button interactions
            const connectButtons = document.querySelectorAll('.connect-button, .follow-button, .event-button, .initiative-button');

            connectButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const originalText = this.innerHTML;

                    if (this.classList.contains('connect-button')) {
                        this.innerHTML = '<i class="fas fa-check"></i> Connected';
                        this.style.backgroundColor = '#03dac6';
                        this.style.color = '#121212';
                    } else if (this.classList.contains('follow-button')) {
                        this.innerHTML = 'Following';
                        this.style.backgroundColor = '#03dac6';
                    } else if (this.classList.contains('event-button')) {
                        this.innerHTML = 'Attending';
                    } else if (this.classList.contains('initiative-button')) {
                        this.innerHTML = 'Joined';
                    }

                    // Prevent multiple clicks
                    this.disabled = true;
                });
            });
        });
    </script>

    <script>
        // Splash screen logic
        document.addEventListener('DOMContentLoaded', function () {
            const splashScreen = document.getElementById('splash-screen');
            const splashSound = document.getElementById('splash-sound');

            // Show splash screen with fade in
            splashScreen.classList.add('visible');

            // Play sound
            splashSound.play().catch(e => {
                // Handle autoplay restrictions
                console.log('Sound autoplay prevented:', e);
            });

            // Hide splash screen after 1 second and show start screen
            setTimeout(function () {
                splashScreen.classList.remove('visible');

                // Remove splash screen from DOM after transition
                setTimeout(function () {
                    splashScreen.style.display = 'none';

                    // Show start screen
                    const startScreen = document.getElementById('start-screen');
                    if (startScreen) {
                        startScreen.classList.add('active');
                    }
                }, 20); // Match the transition duration
            }, 1000);
        });
    </script>

    <script>
        // Fix for touch event handling issues
        document.addEventListener('DOMContentLoaded', function () {
            // 1. Improve tab switching functionality
            const connectionTabs = document.querySelectorAll('.connection-tab');
            const connectionSections = document.querySelectorAll('.connection-section');

            connectionTabs.forEach((tab, index) => {
                tab.addEventListener('click', function (e) {
                    // Prevent any default behavior
                    e.preventDefault();
                    e.stopPropagation();

                    // Remove active class from all tabs and sections
                    connectionTabs.forEach(t => t.classList.remove('active'));
                    connectionSections.forEach(s => s.classList.remove('active'));

                    // Add active class to clicked tab and corresponding section
                    this.classList.add('active');
                    if (connectionSections[index]) {
                        connectionSections[index].classList.add('active');
                    }

                    // Force a small layout recalculation to prevent UI freezing
                    setTimeout(() => {
                        window.scrollBy(0, 1);
                        window.scrollBy(0, -1);
                    }, 10);
                });
            });

            // 2. Fix for swipe functionality in highlighted cards
            const highlightedCards = document.querySelector('.highlighted-cards');
            if (highlightedCards) {
                const paginationDots = document.querySelectorAll('.pagination-dot');
                let currentIndex = 0;
                let startX, moveX;
                let isSwiping = false;

                // Improved touch event handling
                highlightedCards.addEventListener('touchstart', function (e) {
                    startX = e.touches[0].clientX;
                    moveX = 0;
                    isSwiping = true;
                }, { passive: true }); // Use passive listener for better performance

                highlightedCards.addEventListener('touchmove', function (e) {
                    if (!isSwiping) return;
                    moveX = e.touches[0].clientX - startX;

                    // Only prevent default if horizontal swipe is significant
                    // This allows vertical scrolling to still work
                    if (Math.abs(moveX) > Math.abs(e.touches[0].clientY - e.touches[0].clientY) && Math.abs(moveX) > 10) {
                        e.preventDefault();
                    }
                }, { passive: false });

                highlightedCards.addEventListener('touchend', function (e) {
                    if (!isSwiping) return;
                    isSwiping = false;

                    if (moveX < -50 && currentIndex < 2) { // Swipe left
                        currentIndex++;
                        updateCardPosition();
                    } else if (moveX > 50 && currentIndex > 0) { // Swipe right
                        currentIndex--;
                        updateCardPosition();
                    }

                    // Force release any stuck touches
                    e.preventDefault();
                    e.stopPropagation();
                });

                // Add touchcancel handler to reset state
                highlightedCards.addEventListener('touchcancel', function () {
                    isSwiping = false;
                }, { passive: true });

                // Click events for pagination dots with improved handling
                paginationDots.forEach((dot, index) => {
                    dot.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        currentIndex = index;
                        updateCardPosition();
                    });
                });

                function updateCardPosition() {
                    // Use requestAnimationFrame for smoother animations
                    requestAnimationFrame(() => {
                        highlightedCards.style.transform = `translateX(-${currentIndex * 33.333}%)`;

                        // Update pagination dots
                        paginationDots.forEach((dot, index) => {
                            if (index === currentIndex) {
                                dot.classList.add('active');
                            } else {
                                dot.classList.remove('active');
                            }
                        });
                    });
                }
            }


            // 3. General fix for any buttons that might be causing issues
            const allButtons = document.querySelectorAll('button');
            allButtons.forEach(button => {
                button.addEventListener('touchend', function (e) {
                    // Prevent ghost clicks
                    e.preventDefault();
                    e.stopPropagation();

                    // Trigger click after a small delay
                    setTimeout(() => {
                        this.click();
                    }, 10);
                }, { passive: false });
            });

            // 4. Add error handling to catch and log any JS errors
            window.addEventListener('error', function (e) {
                console.error('JS Error:', e.message, 'at', e.filename, ':', e.lineno);
            });
        });
    </script>
</body>

</html>